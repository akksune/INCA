<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Notes</title>
	<link rel="stylesheet" href="assets/css/bootstrap.min.css" />
	<link rel="stylesheet" href="assets/css/custom-notes.css" />
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
	<nav class="navbar navbar-expand-sm justify-content-center">
		<ul class="navbar-nav">
			<li class="nav-item px-5">
				<a class="nav-link" href="pomodoro.html">Pomodoro</a>
			</li>
			<li class="nav-item px-5">
				<a class="nav-link" href="flashcard.html">Flashcards</a>
			</li>
			<li class="nav-item px-5">
				<a class="nav-link" href="timetable.html">Timetable</a>
			</li>
			<li class="nav-item px-5">
				<a class="nav-link" id="active" href="notes.html">Notes</a>
			</li>
			<li class="nav-item px-5">
				<a class="nav-link" href="ambience.html">Ambience</a>
			</li>
		</ul>
	</nav>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        .nav-link {
            color: #6c462d;
            margin-left: 8px;
            margin-right: 8px;
            border-radius: 6px;
            transition: all 0.8s ease 0s;
        }
        
        .nav-link:hover {
            color: #f5f0ee;
            background-color: #6c462d;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
        }

        body {
            background-color: #e5dad0;
			font-family: 'varela round';
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            margin-top: 30px;
            margin-bottom: 20px;

        }

        .card {
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .btn {
            border-radius: 5px;
        }

        #notes {
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="container my-3">
        <h1>Write your notes!</h1>
        <div class="card my-2 mx-2">
            <div class="card-body">
                <h5 class="card-title">Add Notes</h5>
                <div class="form-group">
                    <textarea class="form-control" placeholder="Write your note here" id="addtxt" rows="4"></textarea>
                </div>
                <a class="btn btn-primary my-3" id="addbtn">Add note</a>
                <a class="btn btn-primary my-3" id="clrbtn">Clear</a>
            </div>
        </div>
        <hr>
        <h1>Your notes</h1>
        <hr>
        <div class="row container-fluid" id="notes">
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
    <script src="notes.js"></script>

    <script>
    // if user adds notes
shownotes();

let addbtn = document.getElementById('addbtn');
let clrbtn = document.getElementById('clrbtn');

addbtn.addEventListener('click', function (e) {
    let addtxt = document.getElementById('addtxt');
    let notes = localStorage.getItem('notes');
    if (notes == null) {
        notesobj = [];
    } else {
        notesobj = JSON.parse(notes);
    }

    notesobj.push(addtxt.value);
    localStorage.setItem('notes', JSON.stringify(notesobj));
    addtxt.value = "";
    shownotes();
});

clrbtn.addEventListener('click', function (e) {
    let addtxt = document.getElementById('addtxt');
    addtxt.value = "";
});

function shownotes() {
    let notes = localStorage.getItem('notes');
    if (notes == null) {
        notesobj = [];
    } else {
        notesobj = JSON.parse(notes);
    }

    let html = "";

    notesobj.forEach(function (element, index) {
        html += `
        <div class="notecard card my-2 mx-2" style="width: 18rem;">
            <div class="card-body">
                <h5 class="card-title">Note ${index + 1}</h5>
                <p class="card-text">${element}</p>
                <button id="${index}" class="btn btn-primary" onclick="deletenotes(this.id)">Delete</button>
            </div>
        </div>`;
    });

    let noteselem = document.getElementById('notes');
    if (notesobj.length != 0) {
        noteselem.innerHTML = html;
    } else {
        noteselem.innerHTML = `<h6>Nothing to show. Please add notes.</h6>`;
    }
}

// deleting
function deletenotes(index) {
    let notes = localStorage.getItem('notes');

    if (notes == null) {
        notesobj = [];
    } else {
        notesobj = JSON.parse(notes);
    }

    notesobj.splice(index, 1);
    localStorage.setItem('notes', JSON.stringify(notesobj));
    shownotes();
}

let search = document.getElementById('searchtext');

search.addEventListener("input", function () {
    let inputval = search.value;
    let notecards = document.getElementsByClassName('notecard');

    Array.from(notecards).forEach(function (element) {
        let cardtxt = element.getElementsByTagName('p')[0].innerText;
        if (cardtxt.includes(inputval)) {
            element.style.display = "block";
        } else {
            element.style.display = "none";
        }
    });
});</script>
</body>
</html>